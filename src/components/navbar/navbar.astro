---
// src/components/navbar/navbar.astro
import Container from "@/components/container.astro";
import { Icon } from "astro-icon/components";
const { lang = "en" } = Astro.props;

const menuitems = [
  {
    title: lang === "ko" ? "템플릿" : "Templates",
    path: lang === "ko" ? "/ko/templates" : "/templates",
    icon: "bx:grid-alt",
  },
  {
    title: lang === "ko" ? "블로그" : "Blog",
    path: lang === "ko" ? "/ko/blog" : "/blog",
    icon: "ri:book-line",
  },
  {
    title: lang === "ko" ? "소개" : "About",
    path: lang === "ko" ? "/ko/about" : "/about",
    icon: "bx:user",
  },
  {
    title: lang === "ko" ? "함께 만들기" : "Let’s Talk",
    path: lang === "ko" ? "/ko/contact" : "/contact",
    icon: "ri:mail-line",
  },
];

const langItems = [
  { title: "English", path: "/" },
  { title: "한국어", path: "/ko" },
];
---

<Container>
  <header class="w-full py-4 px-4">
    <div class="flex justify-between items-center w-full">
      <!-- Logo -->
      <a href={lang === "ko" ? "/ko" : "/"} class="text-xl font-bold text-slate-800">
        <span class="text-black">nam</span><span class="text-slate-500">darine</span>
      </a>

      <!-- Desktop menu -->
      <div class="hidden lg:flex items-center gap-6">
        <nav>
          <ul class="flex gap-4 text-base text-slate-600 font-medium items-center">
            {menuitems.map((item) => (
              <li>
                <a href={item.path} class="flex items-center gap-2 hover:text-black transition">
                  <Icon name={item.icon} class="w-5 h-5" />
                  <span>{item.title}</span>
                </a>
              </li>
            ))}
            <Dropdown title={lang === "ko" ? "한국어" : "English"} lastItem={true}>
              {langItems}
            </Dropdown>
          </ul>
        </nav>
      </div>

      <!-- mobile: language + hamburger -->
      <div class="flex gap-3 lg:hidden items-center">
        <!-- Language Switch Button (Mobile) -->
        <button
          id="mobile-language"
          aria-label="Switch Language"
          class="text-gray-600 hover:text-black transition"
          onclick={`window.location.href = '${lang === "ko" ? "/" : "/ko"}'`}
        >
          <Icon name={lang === "ko" ? "circle-flags:us" : "circle-flags:kr"} class="w-6 h-6" />
        </button>

        <!-- Hamburger Button -->
        <button id="mobile-toggle" class="text-gray-800" aria-label="Toggle Menu">
          <Icon name="mdi:menu" class="w-6 h-6" />
        </button>
      </div>

      <!-- mobile menu -->
      <nav id="mobile-menu" class="hidden lg:hidden mt-4">
        <ul class="flex flex-col text-base text-slate-600 font-medium p-4 space-y-2">
          {menuitems.map((item) => (
            <li>
              <a href={item.path} class="flex items-center gap-2 py-2 px-2 hover:text-black transition whitespace-nowrap">
                <Icon name={item.icon} class="w-5 h-5 shrink-0" />
                <span>{item.title}</span>
              </a>
            </li>
          ))}
        </ul>
      </nav>
    </div>
  </header>
</container>

<!-- ✅ mobile toggle script -->
<script is:script client:load>
  document.addEventListener("DOMContentLoaded", () => {
    const toggle = document.getElementById("mobile-toggle");
    const menu = document.getElementById("mobile-menu");

    if (toggle && menu) {
      toggle.addEventListener("click", () => {
        menu.classList.toggle("hidden");
      });
    }
  });
</script>